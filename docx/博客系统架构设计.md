# ä¸ªäººåšå®¢ç³»ç»Ÿ - åç«¯æ¶æ„è®¾è®¡

## ğŸ¯ ç³»ç»Ÿæ¦‚è¿°

ä¸ªäººåšå®¢ç³»ç»Ÿåˆ†ä¸ºä¸¤ä¸ªä¸»è¦éƒ¨åˆ†ï¼š
1. **å‰å°å±•ç¤º** - è®¿å®¢æµè§ˆåšå®¢æ–‡ç« 
2. **åå°ç®¡ç†** - åšä¸»ç®¡ç†å†…å®¹

---

## ğŸ“Š æ•°æ®æ¨¡å‹è®¾è®¡

### 1. **ç”¨æˆ·/åšä¸» (User/Author)**
```typescript
{
  uuid: string;           // å”¯ä¸€æ ‡è¯†
  userName: string;       // ç”¨æˆ·å
  email: string;          // é‚®ç®±
  passwordHash: string;   // å¯†ç 
  role: 'admin' | 'user'; // è§’è‰²ï¼ˆåšä¸»æ˜¯ adminï¼‰
  profile: {
    nickname: string;     // æ˜µç§°/ç¬”å
    avatar: string;       // å¤´åƒ
    bio: string;          // ä¸ªäººç®€ä»‹
    social: {             // ç¤¾äº¤é“¾æ¥
      github?: string;
      twitter?: string;
      email?: string;
    }
  }
}
```

### 2. **æ–‡ç«  (Post/Article)** â­ æ ¸å¿ƒ
```typescript
{
  _id: ObjectId;
  title: string;          // æ ‡é¢˜
  slug: string;           // URL å‹å¥½çš„åˆ«åï¼ˆå¦‚ï¼šmy-first-postï¼‰
  content: string;        // æ–‡ç« å†…å®¹ï¼ˆMarkdown æˆ– HTMLï¼‰
  excerpt: string;        // æ‘˜è¦/ç®€ä»‹
  coverImage?: string;    // å°é¢å›¾
  author: {               // ä½œè€…ä¿¡æ¯
    id: string;
    name: string;
    avatar: string;
  };
  category: ObjectId;     // åˆ†ç±» ID
  tags: string[];         // æ ‡ç­¾æ•°ç»„
  status: 'draft' | 'published' | 'archived';  // çŠ¶æ€
  views: number;          // æµè§ˆæ¬¡æ•°
  likes: number;          // ç‚¹èµæ•°
  publishedAt?: Date;     // å‘å¸ƒæ—¶é—´
  createdAt: Date;
  updatedAt: Date;
}
```

### 3. **åˆ†ç±» (Category)**
```typescript
{
  _id: ObjectId;
  name: string;           // åˆ†ç±»åç§°ï¼ˆå¦‚ï¼šæŠ€æœ¯ã€ç”Ÿæ´»ã€éšç¬”ï¼‰
  slug: string;           // URL åˆ«å
  description?: string;   // æè¿°
  postCount: number;      // æ–‡ç« æ•°é‡
  order: number;          // æ’åº
  createdAt: Date;
}
```

### 4. **æ ‡ç­¾ (Tag)**
```typescript
{
  _id: ObjectId;
  name: string;           // æ ‡ç­¾å
  slug: string;           // URL åˆ«å
  postCount: number;      // ä½¿ç”¨è¯¥æ ‡ç­¾çš„æ–‡ç« æ•°
  color?: string;         // æ ‡ç­¾é¢œè‰²
  createdAt: Date;
}
```

### 5. **è¯„è®º (Comment)**
```typescript
{
  _id: ObjectId;
  postId: ObjectId;       // æ‰€å±æ–‡ç« 
  author: {               // è¯„è®ºè€…ï¼ˆè®¿å®¢æˆ–æ³¨å†Œç”¨æˆ·ï¼‰
    name: string;
    email: string;
    avatar?: string;
    website?: string;
  };
  content: string;        // è¯„è®ºå†…å®¹
  parentId?: ObjectId;    // çˆ¶è¯„è®º IDï¼ˆæ”¯æŒå›å¤ï¼‰
  status: 'pending' | 'approved' | 'spam';  // å®¡æ ¸çŠ¶æ€
  ip: string;             // IP åœ°å€
  createdAt: Date;
}
```

### 6. **é¡µé¢ (Page)** - å¯é€‰
```typescript
{
  _id: ObjectId;
  title: string;          // é¡µé¢æ ‡é¢˜ï¼ˆå¦‚ï¼šå…³äºæˆ‘ã€å‹é“¾ï¼‰
  slug: string;           // URL åˆ«å
  content: string;        // é¡µé¢å†…å®¹
  template?: string;      // æ¨¡æ¿ç±»å‹
  status: 'draft' | 'published';
  order: number;
  createdAt: Date;
  updatedAt: Date;
}
```

---

## ğŸ” æ¥å£è®¾è®¡

### **ä¸€ã€å‰å°æ¥å£ (Frontend API)** - æ— éœ€è®¤è¯

#### ğŸ“ æ–‡ç« ç›¸å…³
```
GET    /api/frontend/posts                    è·å–æ–‡ç« åˆ—è¡¨ï¼ˆåˆ†é¡µã€ç­›é€‰ï¼‰
GET    /api/frontend/posts/:slug              è·å–æ–‡ç« è¯¦æƒ…ï¼ˆé€šè¿‡ slugï¼‰
GET    /api/frontend/posts/:id/related        è·å–ç›¸å…³æ–‡ç« 
POST   /api/frontend/posts/:id/view           å¢åŠ æµè§ˆé‡
POST   /api/frontend/posts/:id/like           ç‚¹èµæ–‡ç« 
GET    /api/frontend/posts/search?q=keyword   æœç´¢æ–‡ç« 
```

#### ğŸ“‚ åˆ†ç±» & æ ‡ç­¾
```
GET    /api/frontend/categories               è·å–æ‰€æœ‰åˆ†ç±»
GET    /api/frontend/categories/:slug/posts   è·å–åˆ†ç±»ä¸‹çš„æ–‡ç« 
GET    /api/frontend/tags                     è·å–æ‰€æœ‰æ ‡ç­¾
GET    /api/frontend/tags/:slug/posts         è·å–æ ‡ç­¾ä¸‹çš„æ–‡ç« 
```

#### ğŸ’¬ è¯„è®º
```
GET    /api/frontend/posts/:id/comments       è·å–æ–‡ç« è¯„è®º
POST   /api/frontend/posts/:id/comments       æäº¤è¯„è®ºï¼ˆè®¿å®¢ï¼‰
```

#### ğŸ“„ é¡µé¢
```
GET    /api/frontend/pages/:slug              è·å–é¡µé¢å†…å®¹
```

#### â„¹ï¸ å…¶ä»–
```
GET    /api/frontend/site/info                è·å–ç«™ç‚¹ä¿¡æ¯ï¼ˆåšä¸»èµ„æ–™ã€ç»Ÿè®¡ï¼‰
GET    /api/frontend/archives                 è·å–å½’æ¡£åˆ—è¡¨ï¼ˆæŒ‰å¹´æœˆåˆ†ç»„ï¼‰
```

---

### **äºŒã€åå°æ¥å£ (Backend API)** - éœ€è¦è®¤è¯ ğŸ”’

#### ğŸ” è®¤è¯
```
POST   /api/backend/auth/login                ç™»å½•
POST   /api/backend/auth/logout               ç™»å‡º
POST   /api/backend/auth/refresh              åˆ·æ–° Token
GET    /api/backend/auth/profile              è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
PUT    /api/backend/auth/profile              æ›´æ–°ä¸ªäººèµ„æ–™
```

#### ğŸ“ æ–‡ç« ç®¡ç†
```
GET    /api/backend/posts                     è·å–æ–‡ç« åˆ—è¡¨ï¼ˆå«è‰ç¨¿ï¼‰
POST   /api/backend/posts                     åˆ›å»ºæ–‡ç« 
GET    /api/backend/posts/:id                 è·å–æ–‡ç« è¯¦æƒ…
PUT    /api/backend/posts/:id                 æ›´æ–°æ–‡ç« 
DELETE /api/backend/posts/:id                 åˆ é™¤æ–‡ç« 
PUT    /api/backend/posts/:id/publish         å‘å¸ƒæ–‡ç« 
PUT    /api/backend/posts/:id/unpublish       å–æ¶ˆå‘å¸ƒ
POST   /api/backend/posts/batch-delete        æ‰¹é‡åˆ é™¤
```

#### ğŸ“‚ åˆ†ç±»ç®¡ç†
```
GET    /api/backend/categories                è·å–æ‰€æœ‰åˆ†ç±»
POST   /api/backend/categories                åˆ›å»ºåˆ†ç±»
PUT    /api/backend/categories/:id            æ›´æ–°åˆ†ç±»
DELETE /api/backend/categories/:id            åˆ é™¤åˆ†ç±»
PUT    /api/backend/categories/reorder        é‡æ–°æ’åº
```

#### ğŸ·ï¸ æ ‡ç­¾ç®¡ç†
```
GET    /api/backend/tags                      è·å–æ‰€æœ‰æ ‡ç­¾
POST   /api/backend/tags                      åˆ›å»ºæ ‡ç­¾
PUT    /api/backend/tags/:id                  æ›´æ–°æ ‡ç­¾
DELETE /api/backend/tags/:id                  åˆ é™¤æ ‡ç­¾
```

#### ğŸ’¬ è¯„è®ºç®¡ç†
```
GET    /api/backend/comments                  è·å–æ‰€æœ‰è¯„è®º
PUT    /api/backend/comments/:id/approve      æ‰¹å‡†è¯„è®º
PUT    /api/backend/comments/:id/reject       æ‹’ç»è¯„è®º
DELETE /api/backend/comments/:id              åˆ é™¤è¯„è®º
POST   /api/backend/comments/batch-approve    æ‰¹é‡æ‰¹å‡†
POST   /api/backend/comments/batch-delete     æ‰¹é‡åˆ é™¤
```

#### ğŸ“„ é¡µé¢ç®¡ç†
```
GET    /api/backend/pages                     è·å–æ‰€æœ‰é¡µé¢
POST   /api/backend/pages                     åˆ›å»ºé¡µé¢
PUT    /api/backend/pages/:id                 æ›´æ–°é¡µé¢
DELETE /api/backend/pages/:id                 åˆ é™¤é¡µé¢
```

#### ğŸ“Š ç»Ÿè®¡æ•°æ®
```
GET    /api/backend/dashboard/stats           ä»ªè¡¨æ¿ç»Ÿè®¡ï¼ˆæ–‡ç« æ•°ã€è¯„è®ºæ•°ã€æµè§ˆé‡ç­‰ï¼‰
GET    /api/backend/dashboard/recent          æœ€è¿‘æ´»åŠ¨
GET    /api/backend/analytics/posts           æ–‡ç« æµè§ˆç»Ÿè®¡
GET    /api/backend/analytics/traffic         è®¿é—®ç»Ÿè®¡
```

#### ğŸ–¼ï¸ åª’ä½“ç®¡ç†
```
POST   /api/backend/media/upload              ä¸Šä¼ å›¾ç‰‡/æ–‡ä»¶
GET    /api/backend/media                     è·å–åª’ä½“åˆ—è¡¨
DELETE /api/backend/media/:id                 åˆ é™¤åª’ä½“
```

#### âš™ï¸ è®¾ç½®
```
GET    /api/backend/settings                  è·å–ç«™ç‚¹è®¾ç½®
PUT    /api/backend/settings                  æ›´æ–°ç«™ç‚¹è®¾ç½®
```

---

## ğŸ“ å»ºè®®çš„é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ Auth.ts                 # è®¤è¯æ¨¡å‹ï¼ˆç°æœ‰ï¼‰
â”‚   â”œâ”€â”€ User.ts                 # ç”¨æˆ·æ¨¡å‹ï¼ˆç°æœ‰ï¼Œéœ€è¦è°ƒæ•´ï¼‰
â”‚   â”œâ”€â”€ Post.ts                 # æ–‡ç« æ¨¡å‹ â­ æ–°å¢
â”‚   â”œâ”€â”€ Category.ts             # åˆ†ç±»æ¨¡å‹ â­ æ–°å¢
â”‚   â”œâ”€â”€ Tag.ts                  # æ ‡ç­¾æ¨¡å‹ â­ æ–°å¢
â”‚   â”œâ”€â”€ Comment.ts              # è¯„è®ºæ¨¡å‹ â­ æ–°å¢
â”‚   â””â”€â”€ Page.ts                 # é¡µé¢æ¨¡å‹ â­ æ–°å¢
â”‚
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ authService.ts          # è®¤è¯æœåŠ¡ï¼ˆç°æœ‰ï¼‰
â”‚   â”œâ”€â”€ postService.ts          # æ–‡ç« æœåŠ¡ â­ æ–°å¢
â”‚   â”œâ”€â”€ categoryService.ts      # åˆ†ç±»æœåŠ¡ â­ æ–°å¢
â”‚   â”œâ”€â”€ tagService.ts           # æ ‡ç­¾æœåŠ¡ â­ æ–°å¢
â”‚   â”œâ”€â”€ commentService.ts       # è¯„è®ºæœåŠ¡ â­ æ–°å¢
â”‚   â””â”€â”€ pageService.ts          # é¡µé¢æœåŠ¡ â­ æ–°å¢
â”‚
â”œâ”€â”€ controllers/
â”‚   â”œâ”€â”€ backend/                # åå°æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ authController.ts   # è®¤è¯ï¼ˆç°æœ‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ postController.ts   # æ–‡ç« ç®¡ç† â­
â”‚   â”‚   â”œâ”€â”€ categoryController.ts
â”‚   â”‚   â”œâ”€â”€ tagController.ts
â”‚   â”‚   â”œâ”€â”€ commentController.ts
â”‚   â”‚   â””â”€â”€ dashboardController.ts
â”‚   â”‚
â”‚   â””â”€â”€ frontend/               # å‰å°æ§åˆ¶å™¨
â”‚       â”œâ”€â”€ postController.ts   # æ–‡ç« å±•ç¤º â­
â”‚       â”œâ”€â”€ categoryController.ts
â”‚       â”œâ”€â”€ tagController.ts
â”‚       â”œâ”€â”€ commentController.ts
â”‚       â””â”€â”€ siteController.ts
â”‚
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ backend/
â”‚   â”‚   â”œâ”€â”€ auth.ts             # è®¤è¯è·¯ç”±ï¼ˆç°æœ‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ posts.ts            # æ–‡ç« ç®¡ç†è·¯ç”± â­
â”‚   â”‚   â”œâ”€â”€ categories.ts
â”‚   â”‚   â”œâ”€â”€ tags.ts
â”‚   â”‚   â”œâ”€â”€ comments.ts
â”‚   â”‚   â””â”€â”€ dashboard.ts
â”‚   â”‚
â”‚   â””â”€â”€ frontend/
â”‚       â”œâ”€â”€ posts.ts            # æ–‡ç« å±•ç¤ºè·¯ç”± â­
â”‚       â”œâ”€â”€ categories.ts
â”‚       â”œâ”€â”€ tags.ts
â”‚       â”œâ”€â”€ comments.ts
â”‚       â””â”€â”€ site.ts
â”‚
â”œâ”€â”€ middleware/
â”‚   â”œâ”€â”€ auth.ts                 # JWT è®¤è¯ä¸­é—´ä»¶ï¼ˆéœ€è¦å®Œå–„ï¼‰
â”‚   â”œâ”€â”€ adminOnly.ts            # ç®¡ç†å‘˜æƒé™ä¸­é—´ä»¶ â­
â”‚   â”œâ”€â”€ validatePost.ts         # æ–‡ç« æ•°æ®éªŒè¯ â­
â”‚   â””â”€â”€ rateLimit.ts            # é¢‘ç‡é™åˆ¶ â­
â”‚
â””â”€â”€ utils/
    â”œâ”€â”€ generateTokens.ts       # JWT ç”Ÿæˆï¼ˆç°æœ‰ï¼‰
    â”œâ”€â”€ markdown.ts             # Markdown è§£æ â­
    â”œâ”€â”€ slugify.ts              # ç”Ÿæˆ URL å‹å¥½åˆ«å â­
    â””â”€â”€ sanitize.ts             # å†…å®¹è¿‡æ»¤ â­
```

---

## ğŸ”„ ç°æœ‰ä»£ç çš„è°ƒæ•´å»ºè®®

### 1. **ç²¾ç®€ç”¨æˆ·æ¨¡å‹**

ä½ ç°åœ¨çš„ User æ¨¡å‹æ›´é€‚åˆä½œä¸ºåšä¸»çš„ä¸ªäººèµ„æ–™ï¼Œä¸éœ€è¦é‚£ä¹ˆå¤æ‚ï¼š

```typescript
// src/models/User.ts (è°ƒæ•´å)
export interface IUser extends Document {
  uuid: string;              // å…³è”åˆ° Auth
  nickname: string;          // åšä¸»æ˜µç§°/ç¬”å
  avatar?: string;           // å¤´åƒ
  bio?: string;              // ä¸ªäººç®€ä»‹
  social: {
    github?: string;
    twitter?: string;
    website?: string;
  };
  // åˆ é™¤ age, location ç­‰ä¸éœ€è¦çš„å­—æ®µ
}
```

### 2. **ç§»é™¤ä¸å¿…è¦çš„ç”¨æˆ·ç®¡ç†æ¥å£**

ä¸ªäººåšå®¢é€šå¸¸åªæœ‰ä¸€ä¸ªåšä¸»ï¼Œä¸éœ€è¦ï¼š
- âŒ åˆ›å»ºç”¨æˆ·æ¥å£
- âŒ ç”¨æˆ·åˆ—è¡¨æ¥å£
- âŒ åˆ é™¤ç”¨æˆ·æ¥å£

åªä¿ç•™ï¼š
- âœ… è·å–åšä¸»ä¿¡æ¯ï¼ˆå‰å°å±•ç¤ºï¼‰
- âœ… æ›´æ–°ä¸ªäººèµ„æ–™ï¼ˆåå°ç®¡ç†ï¼‰

### 3. **æ³¨å†Œé€»è¾‘è°ƒæ•´**

ä¸ªäººåšå®¢ä¸€èˆ¬ä¸éœ€è¦æ³¨å†ŒåŠŸèƒ½ï¼Œå¯ä»¥ï¼š
- æ–¹æ¡ˆ Aï¼šç§»é™¤æ³¨å†Œæ¥å£ï¼Œç›´æ¥åœ¨æ•°æ®åº“åˆ›å»ºç®¡ç†å‘˜è´¦å·
- æ–¹æ¡ˆ Bï¼šä¿ç•™æ³¨å†Œä½†é™åˆ¶ä¸ºç¬¬ä¸€æ¬¡åˆå§‹åŒ–ä½¿ç”¨ï¼ˆæ£€æŸ¥æ•°æ®åº“æ˜¯å¦å·²æœ‰ç”¨æˆ·ï¼‰

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½ä¼˜å…ˆçº§

### MVPï¼ˆæœ€å°å¯è¡Œäº§å“ï¼‰
1. âœ… è®¤è¯ï¼ˆç™»å½•/ç™»å‡ºï¼‰
2. â­ **æ–‡ç«  CRUD**ï¼ˆæœ€é‡è¦ï¼ï¼‰
3. â­ **æ–‡ç« åˆ†ç±»**
4. â­ **æ–‡ç« æ ‡ç­¾**
5. â­ **å‰å°æ–‡ç« å±•ç¤º**ï¼ˆåˆ—è¡¨ã€è¯¦æƒ…ï¼‰

### ç¬¬äºŒé˜¶æ®µ
6. ğŸ’¬ è¯„è®ºç³»ç»Ÿ
7. ğŸ“Š ç»Ÿè®¡æ•°æ®
8. ğŸ–¼ï¸ å›¾ç‰‡ä¸Šä¼ 
9. ğŸ“„ è‡ªå®šä¹‰é¡µé¢

### ç¬¬ä¸‰é˜¶æ®µ
10. ğŸ” å…¨æ–‡æœç´¢
11. ğŸ“± SEO ä¼˜åŒ–
12. ğŸ¨ ä¸»é¢˜åˆ‡æ¢
13. ğŸ“§ é‚®ä»¶é€šçŸ¥

---

## ğŸš€ ä¸‹ä¸€æ­¥å»ºè®®

æˆ‘å¯ä»¥å¸®ä½ ï¼š

1. **åˆ›å»ºæ ¸å¿ƒæ–‡ç« æ¨¡å‹**ï¼ˆPostã€Categoryã€Tagï¼‰
2. **å®ç°æ–‡ç« ç®¡ç†æ¥å£**ï¼ˆåå° CRUDï¼‰
3. **å®ç°æ–‡ç« å±•ç¤ºæ¥å£**ï¼ˆå‰å°åˆ—è¡¨ã€è¯¦æƒ…ï¼‰
4. **å®Œå–„ JWT è®¤è¯ä¸­é—´ä»¶**
5. **è°ƒæ•´ç°æœ‰çš„ç”¨æˆ·æ¨¡å‹**

ä½ æƒ³ä»å“ªä¸ªå¼€å§‹ï¼Ÿæˆ‘å»ºè®®å…ˆä» **æ–‡ç« æ¨¡å‹ + æ–‡ç« ç®¡ç†æ¥å£** å¼€å§‹ï¼Œè¿™æ˜¯åšå®¢ç³»ç»Ÿçš„æ ¸å¿ƒåŠŸèƒ½ã€‚

---

## ğŸ’¡ å‚è€ƒçš„åšå®¢ç³»ç»Ÿ

å¯ä»¥å‚è€ƒè¿™äº›ä¼˜ç§€çš„åšå®¢ç³»ç»Ÿè®¾è®¡ï¼š
- **Ghost** - Node.js åšå®¢å¹³å°
- **Hexo** - é™æ€åšå®¢ç”Ÿæˆå™¨
- **WordPress** - ç»å…¸ CMS
- **Typecho** - è½»é‡çº§åšå®¢

---

éœ€è¦æˆ‘å¸®ä½ å¼€å§‹å®ç°æ–‡ç« ç³»ç»Ÿå—ï¼ŸğŸ˜Š

